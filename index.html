<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Image Editor</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-pVNrNf9XUo0V3t2IPBxxULvL4fFhz1+l2Q/kCgkNj5lLMUvjIo0m4KhxjFbUQGRbJ4bcvGxGGVYGpQip3pYjMQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<style>
  body { font-family: 'Inter', sans-serif; }
  input[type=range]::-webkit-slider-thumb { background-color: #4f46e5; }
  .filter-btn:hover { transform: scale(1.05); transition: 0.2s; }
</style>
</head>
<body class="h-full bg-gray-100 flex flex-col items-center p-4">

<h1 class="text-3xl font-bold mb-4 text-gray-800">Professional Image Editor</h1>

<!-- Upload Section -->
<div id="dropArea" class="border-4 border-dashed border-gray-400 rounded-lg w-full max-w-4xl p-6 mb-6 text-center hover:border-indigo-500 transition cursor-pointer bg-white">
  <i class="fa-solid fa-upload text-indigo-500 text-2xl"></i>
  <p class="mt-2 font-semibold text-gray-700">Drag & Drop Image Here or Click to Upload</p>
  <input type="file" id="upload" accept="image/*" class="hidden">
</div>

<div class="flex flex-col md:flex-row gap-6 w-full max-w-6xl mb-6">
  <!-- Sidebar Filters -->
  <div class="md:w-1/4 bg-white p-4 rounded-lg shadow flex flex-col gap-4">
    <h2 class="font-semibold mb-2 text-gray-700 text-lg">Filters</h2>
    <div class="flex flex-col gap-4">
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-sun text-yellow-500"></i>
        <label>Brightness</label>
        <input type="range" id="brightness" min="0" max="200" value="100" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-adjust text-purple-500"></i>
        <label>Contrast</label>
        <input type="range" id="contrast" min="0" max="200" value="100" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-droplet text-blue-500"></i>
        <label>Saturation</label>
        <input type="range" id="saturate" min="0" max="200" value="100" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-circle-notch text-gray-500"></i>
        <label>Blur</label>
        <input type="range" id="blur" min="0" max="20" value="0" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-palette text-red-500"></i>
        <label>Hue</label>
        <input type="range" id="hue" min="0" max="360" value="0" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-fill-drip text-orange-500"></i>
        <label>Sepia</label>
        <input type="range" id="sepia" min="0" max="100" value="0" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-circle-half-stroke text-gray-700"></i>
        <label>Grayscale</label>
        <input type="range" id="grayscale" min="0" max="100" value="0" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-moon text-gray-900"></i>
        <label>Invert</label>
        <input type="range" id="invert" min="0" max="100" value="0" class="flex-1">
      </div>
      <div class="flex items-center gap-2">
        <i class="fa-solid fa-tint text-red-600"></i>
        <label>Tint</label>
        <input type="range" id="tint" min="-100" max="100" value="0" class="flex-1">
      </div>
    </div>
    <button id="resetFilters" class="mt-4 bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600 filter-btn">Reset Filters</button>
  </div>

  <!-- Image Preview -->
  <div class="md:flex-1 flex flex-col gap-4">
    <div class="flex justify-between mb-2">
      <h2 class="font-semibold text-gray-700 text-lg">Original</h2>
      <h2 class="font-semibold text-gray-700 text-lg">Edited</h2>
    </div>
    <div class="flex gap-4">
      <canvas id="originalCanvas" class="border rounded max-w-full shadow"></canvas>
      <canvas id="editedCanvas" class="border rounded max-w-full shadow"></canvas>
    </div>
    <div class="flex gap-4 mt-4">
      <button id="downloadPNG" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 filter-btn"><i class="fa-solid fa-download"></i> Download PNG</button>
      <button id="downloadJPG" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 filter-btn"><i class="fa-solid fa-download"></i> Download JPG</button>
    </div>

    <!-- Preset Filters -->
    <div class="flex gap-4 mt-4">
      <button class="preset bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 filter-btn" data-preset="vintage">Vintage</button>
      <button class="preset bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 filter-btn" data-preset="cool">Cool</button>
      <button class="preset bg-pink-500 text-white px-4 py-2 rounded hover:bg-pink-600 filter-btn" data-preset="warm">Warm</button>
    </div>
  </div>
</div>

<script>
const upload = document.getElementById('upload');
const dropArea = document.getElementById('dropArea');
const originalCanvas = document.getElementById('originalCanvas');
const editedCanvas = document.getElementById('editedCanvas');
const ctxOriginal = originalCanvas.getContext('2d');
const ctxEdited = editedCanvas.getContext('2d');
let originalImage = new Image();

const filters = {
  brightness: 100, contrast: 100, saturate: 100, blur: 0,
  hue: 0, sepia: 0, grayscale: 0, invert: 0, tint: 0
};

function updateFilters() {
  const filterStr = `
    brightness(${filters.brightness}%)
    contrast(${filters.contrast}%)
    saturate(${filters.saturate}%)
    blur(${filters.blur}px)
    hue-rotate(${filters.hue}deg)
    sepia(${filters.sepia}%)
    grayscale(${filters.grayscale}%)
    invert(${filters.invert}%)
  `;
  ctxEdited.clearRect(0,0,editedCanvas.width,editedCanvas.height);
  ctxEdited.drawImage(originalImage,0,0,editedCanvas.width,editedCanvas.height);
  ctxEdited.globalCompositeOperation = 'multiply';
  ctxEdited.fillStyle = filters.tint > 0 ? `rgba(255,0,0,${filters.tint/100})` :
                        filters.tint < 0 ? `rgba(0,0,255,${Math.abs(filters.tint)/100})` : 'rgba(0,0,0,0)';
  ctxEdited.fillRect(0,0,editedCanvas.width,editedCanvas.height);
  ctxEdited.globalCompositeOperation = 'source-over';
  editedCanvas.style.filter = filterStr;
}

function handleFiles(file) {
  const reader = new FileReader();
  reader.onload = function(e) { originalImage.src = e.target.result; }
  reader.readAsDataURL(file);
}

originalImage.onload = function() {
  originalCanvas.width = originalImage.width;
  originalCanvas.height = originalImage.height;
  editedCanvas.width = originalImage.width;
  editedCanvas.height = originalImage.height;
  ctxOriginal.drawImage(originalImage,0,0);
  updateFilters();
}

Object.keys(filters).forEach(f => {
  const el = document.getElementById(f);
  if(el) el.addEventListener('input', e => { filters[f] = e.target.value; updateFilters(); });
});

document.getElementById('resetFilters').addEventListener('click', () => {
  Object.keys(filters).forEach(f => filters[f] = f==='brightness'||f==='contrast'||f==='saturate'?100:0);
  Object.keys(filters).forEach(f => document.getElementById(f).value = filters[f]);
  updateFilters();
});

// Presets
document.querySelectorAll('.preset').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const p = btn.dataset.preset;
    if(p==='vintage'){ filters.brightness=110; filters.contrast=120; filters.saturate=80; filters.sepia=30; filters.tint=20; }
    if(p==='cool'){ filters.brightness=100; filters.contrast=110; filters.saturate=90; filters.hue=200; filters.tint=-20; }
    if(p==='warm'){ filters.brightness=110; filters.contrast=105; filters.saturate=120; filters.hue=10; filters.tint=30; }
    Object.keys(filters).forEach(f => document.getElementById(f).value = filters[f]);
    updateFilters();
  });
});

// Drag & Drop
dropArea.addEventListener('dragover', e=>{ e.preventDefault(); dropArea.classList.add('border-indigo-500'); });
dropArea.addEventListener('dragleave', e=>{ e.preventDefault(); dropArea.classList.remove('border-indigo-500'); });
dropArea.addEventListener('drop', e=>{ e.preventDefault(); dropArea.classList.remove('border-indigo-500'); handleFiles(e.dataTransfer.files[0]); });
dropArea.addEventListener('click', ()=>upload.click());
upload.addEventListener('change', e=>handleFiles(e.target.files[0]));

// Download
function download(canvas,type='png'){ const link=document.createElement('a'); link.download=`edited.${type}`; link.href=canvas.toDataURL(`image/${type}`); link.click(); }
document.getElementById('downloadPNG').addEventListener('click',()=>download(editedCanvas,'png'));
document.getElementById('downloadJPG').addEventListener('click',()=>download(editedCanvas,'jpeg'));
</script>
</body>
</html>
